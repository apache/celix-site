<!DOCTYPE html> 
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE- 2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="/import/style.css" rel="stylesheet">
<!--page info-->
<title>Welcome to Apache Celix</title>
<meta name="description" content="">
<meta name="author" content="me">
</head>
<body>
<div id="imgbackground"></div>
<nav class = "shadowed">
	<a href="/"><img class="shadowed" src="/media/celix.png"></a>
	<div id="mobmenu">
	<select class="mobbutton" onchange="if (this.value) window.location.href=this.value">
		<option value="">navigate</option>
		<option value="/">Home</option>
		<option value="">Documentation</option>
		<option value="/downloads.html">Downloads</option>
		<optgroup label="Community">
			<option value="/contributing.html">Contributing</option>
			<option value="/boardreports.html">Board Reports</option>
			<option value="/releasing.html">Releasing</option>
		</optgroup>
		<optgroup label="Support">
			<option value="/mailinglist.html">Mailing List</option>
			<option value="/issuetracking.html">Issue Tracking</option>
		</optgroup>
		<optgroup label="ASF">
			<option value="http://www.apache.org/">ASF Home</option>
			<option value="http://www.apache.org/foundation/how-it-works.html">How it works</option>
			<option value="http://www.apache.org/licenses/">License</option>
			<option value="http://www.apache.org/foundation/sponsorship.html">Sponsorship</option>
			<option value="http://www.apache.org/foundation/thanks.html">Thanks</option>
			<option value="http://www.apache.org/security">Security</option>
		</optgroup>
	</select>
	<div id="dropmenu" class="shadowed">
		<a href="/"><div class="dropbutton">
			Home
		</div></a><a href=""><div class="dropbutton">
			Documentation
		</div></a><a href="/downloads.html"><div class="dropbutton">
			Download
		</div></a><div class="dropdown">
			<div class="dropbutton">Community<div class="triangle"></div></div>
			<div class="dropdown-content">
				<a href="/contributing.html">Contributing</a>
				<a href="/boardreports.html">Board Reports</a>
				<a href="/releasing.html">Releasing</a>
			</div>
		</div><div class="dropdown">
			<div class="dropbutton">Support<div class="triangle"></div></div>
			<div class="dropdown-content">
				<a href="/mailinglist.html">Mailing List</a>
				<a href="/issuetracking.html">Issue Tracking</a>
			</div>
		</div><div class="dropdown">
			<div class="dropbutton">ASF<div class="triangle"></div></div>
			<div class="dropdown-content">
				<a href="http://www.apache.org/">ASF Home</a>
				<a href="http://www.apache.org/foundation/how-it-works.html">How it works</a>
				<a href="http://www.apache.org/licenses/">License</a>
				<a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
				<a href="http://www.apache.org/foundation/thanks.html">Thanks</a>
				<a href="http://www.apache.org/security">Security</a>
			</div>
		</div>
	</div>
	</div>
</nav>
<a href="https://github.com/apache/celix">
			<img class="GHImg shadowed" src="/media/forkmeongithub.png" alt="Fork me on GitHub"
			data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png">
			<img class="GHImgSmall shadowed" src="/media/forkmesmall.png" alt="Fork me on GitHub">
</a>
<a href="http://apache.org/">
			<img id="APbig" class="logoAP shadowed" src="/media/Apache_full.svg">
			<img id="APsmall" class="logoAP shadowed" src="/media/Apache_Feather.svg">
</a>
<div class="spacer">
<h1>Releasing Apache Celix</h1>

<p>Note: This information is only of use to Apache Celix Release Managers!</p>

<p>Steps to follow:</p>

<ul>
<li>Create signing KEYs</li>
<li>Update release related files</li>
<li>Compile and test</li>
<li>Create SVN tag</li>
<li>Create, sign and publish artefacts</li>
<li>Run the vote</li>
<li>Post the vote results</li>
<li>Roll out the release artefacts</li>
<li>Announce the release</li>
</ul>

<p>Interesting links:</p>

<ul>
<li><a href="http://www.apache.org/dev/release.html">Apache Release Guide</a></li>
<li><a href="http://www.apache.org/dev/release-signing.html">Apache Release Signing</a></li>
<li><a href="http://creadur.apache.org/rat/apache-rat/index.html">Apache RAT</a></li>
<li><a href="http://www.apache.org/dev/openpgp.html">Apache OpenPGP Howto</a></li>
</ul>

<h2>Create signing KEYs</h2>

<p>Each Release Manager must have his own signing keys. Information about and instruction for the generation of these keys can be found on the
<a href="http://www.apache.org/dev/release-signing.html#generate">Signing Releases page</a> and <a href="http://www.apache.org/dev/openpgp.html#generate-key">How To OpenPGP</a>. Be sure to follow the information provided on that site and its references.</p>

<p>The generated key can be uploaded to the <a href="http://pgp.mit.edu">MIT PGP Public Key Server</a>.</p>

<p>Next, the public key signature must be added to the KEYS file. Again, read the <a href="http://www.apache.org/dev/release-signing.html#keys-policy">Signing Releases page</a>
for more information. This updated file needs to be uploaded to SVN, be sure to upload it to:</p>

<ul>
<li><a href="https://dist.apache.org/repos/dist/dev/incubator/celix/KEYS">Apache Celix release development area KEYS</a></li>
<li><a href="https://dist.apache.org/repos/dist/release/incubator/celix/KEYS">Apache Celix release distribution area KEYS</a></li>
</ul>

<h2>Update release related files</h2>

<p>For every release the related files must be updated. The following files are relevant:</p>

<ul>
<li><p>CHANGES</p>

<p>Add a list of fixed issues which can be created using Jira.</p></li>
<li><p>RELEASE_NOTES</p>

<p>Add additional notes regarding this release, eg known short comings.</p></li>
<li><p>BUILDING</p>

<p>Even though the BUILDING file doesn't have any specific release information, it should be verified before making a release.  </p></li>
<li><p>NOTICE</p>

<p>If needed, add any new license related information to this file.</p></li>
</ul>

<p>Besides this information, the version needs to be bumped. Even though every bundle has its own version, a release is made with one overall version. This version
is defined in the top-level CMakeLists.txt file.
Update the following pieces:</p>

<pre><code>SET(CELIX_MAJOR "X")
SET(CELIX_MINOR "Y")
SET(CELIX_MICRO "Z")
</code></pre>

<p>Note: The DEFAULT_VERSION property is used as default version for new bundles and as such does not need to be updated when making a release.</p>

<h2>Compile and test</h2>

<p>Before creating a branch, be sure that the source compiles and tests run successfully. If there are any known shortcomings, make sure they are listed in the 
RELEASE_NOTES. Details for compiling and testing are available in the BUILDING file.</p>

<pre><code>// Create a directory as sibling of the celix release directory
&gt; mkdir celix-build
&gt; cd celix-build
// Run CMake to generate the makefiles. Enable all BUILD options.
&gt; ccmake ../celix
&gt; make
&gt; make deploy
&gt; make test
</code></pre>

<p>Also verify that the provides examples work as expected. If needed ask other committers to test parts, eg the GTK examples.</p>

<pre><code>// Go to the deploy directory to see all examples
&gt; cd deploy
// Test the different examples, eg
&gt; cd hello_world
&gt; sh run.sh
// Depending on the example the output might be different. Most examples provide a shell to inspect the framework.
// To list the commands use the "help" command.
-&gt; help
....
</code></pre>

<p>After verifying the build, run Apache RAT to check for any licensing problems. If Apache RAT is configured in the CMake build the "rat" target can be used to run
the check.</p>

<pre><code>// From the celix-build directory
// Run CMake to set the APACHE_RAT library (path to the JAR file).
&gt; ccmake ../celix
// Run RAT
&gt; make rat
</code></pre>

<p>Apache RAT should not raise any concers, if there are, check the source files for 
a license header. If it is a false positive update the rat-excludes.txt file in the root of the project. Be sure it is a false positive! If in doubt, ask the 
mailing list! Third party licenses may need to be mentioned in the NOTICE file.</p>

<h2>Create SVN tag</h2>

<p>After changing all files a tag for the new release must be made. Before doing so, make sure all changed files are committed.</p>

<p>The tag should be named like this: celix-X.Y.Z</p>

<p>To make a tag use the following command:</p>

<pre><code>svn copy http://svn.apache.org/repos/asf/celix/trunk/ \
    http://svn.apache.org/repos/asf/celix/tags/celix-X.Y.Z \
    -m "X.Y.Z release of the Apache Celix project."
</code></pre>

<p>Note: Make sure there are no new changes made on trunk while working on the release. Discuss: Use a branch for staging the release and the files? Or possibly use a revision nr?</p>

<h2>Create, sign and publish artefacts</h2>

<p>Since Celix only releases source artefacts, creating the artefact is simple and straightforward</p>

<pre><code>// Create symbolic link so the archive has a directory with version information
&gt; ln -s celix celix-X.Y.Z
// Create GZip archive
&gt; tar -hczf celix-X.Y.Z.tar.gz celix-X.Y.Z
// The create symbolic link can be removed
&gt; celix celix-X.Y.Z
</code></pre>

<p>After creating the artefact, the file has to be signed. More information about signing can be found at (http://www.apache.org/dev/release-signing.html).</p>

<pre><code>// Generate MD5 checksum
&gt; md5 celix-X.Y.Z.tar.gz &gt; celix-X.Y.Z.tar.gz.md5
// Generate SHA512 checksum
&gt; gpg --print-md SHA512 celix-X.Y.Z.tar.gz &gt; celix-X.Y.Z.tar.gz.sha
// Generate ASCII signature
&gt; gpg --armor --output celix-X.Y.Z.tar.gz.asc --detach-sig celix-X.Y.Z.tar.gz
</code></pre>

<p>Copy the archive of the source to the <a href="https://dist.apache.org/repos/dist/dev/incubator/celix/KEYS">Apache Celix release development area</a> (using SVN).</p>

<p>See the <a href="http://www.apache.org/dev/release.html#host-rc">Apache Release Guide</a> for more information.</p>

<h2>Run the vote</h2>

<p>Before a release is official a vote has to be held. More information on voting can be found on <a href="http://www.apache.org/foundation/voting.html">Apache Voting Process</a>.</p>

<p>The first vote has to be done on the public mailinglist of the project itself (dev@celix.apache.org). The following template must be used for this vote:</p>

<p>================================================================================================================</p>

<blockquote>
  <p>To: dev@celix.apache.org <br />
  Subject: [VOTE] Release Celix version X.Y.Z</p>
  
  <p>This is the release vote for Apache Celix, version X.Y.Z.</p>
  
  <p>It fixes the following issues: <br />
  {Create Release Note link using https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12323511}</p>
  
  <p>Source files: <br />
  https://dist.apache.org/repos/dist/dev/celix/celix-X.Y.Z/</p>
  
  <p>The tag to be voted upon: <br />
  http://svn.apache.org/repos/asf/celix/tags/celix-X.Y.Z/</p>
  
  <p>Celix's keys can be found at: <br />
  https://dist.apache.org/repos/dist/dev/incubator/celix/KEYS</p>
  
  <p>Information for voting on a release can be found at http://www.apache.org/dev/release.html#approving-a-release</p>
  
  <p>Please vote to approve this release:</p>
  
  <p>[ ] +1 Approve the release <br />
  [ ] -1 Disapprove the release (please provide specific comments)</p>
  
  <p>This vote will be open for at least 72 hours.</p>
</blockquote>

<p>================================================================================================================</p>

<p>After this first vote the results must be posted to the "dev" list, see below for more information.</p>

<p>================================================================================================================</p>

<p>Note: Be sure to use the [VOTE] tag, this is used by the automated vote tracking system to keep track of outstanding vote threads.</p>

<h2>Post the vote results</h2>

<p>As mentioned before, after each vote the results must be posted to the corresponding list. This "Result" vote contains the number of votes made, including 
wether a vote is binding or not. For a successful vote the following template can be used.</p>

<p>================================================================================================================</p>

<blockquote>
  <p>To: dev@celix.apache.org <br />
  Subject: [RESULT][VOTE] Release Celix version X.Y.Z</p>
  
  <p>The vote has passed with the following result:</p>
  
  <p>+1 Name of Approver (apache ID) (binding|not binding) <br />
  +1 Name of Approver (apache ID) (binding|not binding) <br />
  ...</p>
  
  <p>{include additional details if needed}</p>
  
  <p>The released artifact will be moved to the release area for mirroring. After the mirroring period the release will be announced.</p>
  
  <p>Thanks for voting.</p>
</blockquote>

<p>================================================================================================================</p>

<p>Note: Be sure to post the vote result with the same topic as the original message. Also prepend the subject with [RESULT]. This is, again, needed to be able to keep track
of vote threads. </p>

<h2>Roll out release artefacts</h2>

<p>If the vote is passed successfully the release can be moved from the "dev" area to "release". The automated svnpubsub will move the artifact to the correct 
server for mirroring. Mirroring typically can take up to 24 hours.</p>

<p>Besides uploading the new release, the old release should be archived. Since archiving is already automated, it is only needed to delete the previous version from the release
area. See the <a href="http://www.apache.org/dev/release.html#when-to-archive">Apache Release Guide</a> for more information.</p>

<p>See the <a href="http://www.apache.org/dev/release.html#upload-ci">Apache Release Guide</a> for more information.</p>

<p>After these 24 hours the release can be announced.</p>

<h2>Announce the release</h2>

<p>Update website's <a href="http://celix.apache.org/index.html">News</a> and <a href="http://celix.apache.org/download.html">Download</a> sections to include the new release.</p>

<p>On the "Download" page, the old release can be replaced with the new one, there is no need to keep a link to archived versions. The "News" section can simply be extended
with an additional entry.</p>

<p>Additionally it is a good idea to post a message to "announce@apache.org" and "dev@celix.apache.org". (note: the from address must be a ...@apache.org address).</p>

<p>The following template must be used:</p>

<p>================================================================================================================</p>

<blockquote>
  <p>To: announce@apache.org, dev@celix.apache.org <br />
  Subject: [ANNOUNCE] Apache Celix X.Y.Z released</p>
  
  <p>The Apache Celix team is pleased to announce the release of Celix X.Y.Z.</p>
  
  <p>Celix is an implementation of the OSGi specification adapted to C. It will follow the API 
  as close as possible, but since the OSGi specification is written primarily for Java, there 
  will be differences. An important aspect of the implementation is interoperability between 
  Java and C. This interoperability is achieved by porting and implementing the Remote 
  Services specification in Celix.</p>
  
  <p>This new release focusses on .... {add additional information for this release}</p>
  
  <p>The release is available here: <br />
  http://celix.apache.org/download.cgi</p>
  
  <p>The full change log is available here: <br />
  {Create Release Note link using https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12323511}</p>
  
  <p>We welcome your help and feedback. For more information on how to report problems, 
  and to get involved, visit the project website at http://celix.apache.org/</p>
  
  <p>The Apache Celix Team</p>
</blockquote>

<p>================================================================================================================</p>
</div><div id="foot">
<div id="footText">
Copyright © 2011 The Apache Software Foundation, Licensed under the Apache License, Version 2.0.
Apache Celix, Celix, Apache, the Apache feather logo and the Apache Celix logo are trademarks of The Apache Software Foundation. 
</div></div>
<script src='import/javascript.js'></script>
